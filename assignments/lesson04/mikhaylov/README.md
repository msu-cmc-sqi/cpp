# Code Reviewer

Code Reviewer — агент для автоматического анализа исходного кода на C++ и Python. Он находит возможные ошибки, уязвимости, и даёт краткие рекомендации по исправлению.
Подходит разработчикам для быстрой предварительной проверки перед полноценным обзором.

## Возможности
- Анализирует C++ и Python код (автоопределение языка или указание вручную).
- Выдаёт нумерованный список проблем с: заголовком, описанием, причиной, уровнем серьёзности (Low/Medium/High) и конкретной рекомендацией или патчем.
- Обрабатывает произвольный текст исходного файла, передаваемого в блоке между маркерами.
- Всё взаимодействие с моделью идёт через существующий AiAgent (HTTPS POST /api/generate).
- Конфигурируется стартовый prompt через prompt.json — пользователь меняет только prompt.json и файл с кодом.
- Имя файла с исходным кодом передаётся через аргументы командной строки, вместе с именами файлов с config и prompt/

## Установка и сборка
```bash
git clone <ваш-репозиторий>
cd <папка>
mkdir build && cd build
cmake ..
make -j
```

## Настройка

`config.json` в корне проекта:
```json
{
  "host": "ai-api.hurated.com",
  "port": "443",
  "api_key": "<ваш ключ>"
}
```

Промпт задавать в `prompt.json`. Пример:
```json
{
  "prompt": "Ты — агент \"Code Reviewr\": проверяешь C++ или Python код на ошибки, баги, уязвимости и даёшь рекомендации. Действуй как опытный инженер: кратко идентифицируй проблему, укажи её причину, оценку серьёзности (Low/Medium/High) и предложи конкретное решение или пример исправления. Выдавай нумерованный список. Формат ответа:\n\n1) Заголовок проблемы\n   - Описание: короткое объяснение\n   - Причина: почему это может привести к багу/уязвимости\n   - Серьёзность: Low/Medium/High\n   - Рекомендация: конкретный патч/пример кода или шаги по исправлению\n\nЕсли проблем нет, ответь одной строкой: \"No issues found.\" Ответ — на русском языке. После базовой инструкции помещай в запрос блок с кодом между маркерами ----BEGIN SOURCE---- и ----END SOURCE----. Пользователь будет менять только содержимое этого блока (или файл source.txt)."
}
```

## Запуск
```bash
cd <папка>
./build/ai_agent [config.json] [prompt.json] [source.file]
```
**Пример**:
```bash
./build/ai_agent config.json prompt.json ./examples/test1_nullptr_deref.cpp
```
**Запуск с дефолтными файлами config.json, prompt.json и source.txt**
```bash
./build/ai_agent
```

## Примеры тестовых файлов

В каталоге `examples/` находится набор тестовых программ на C++.

